## CSRF

csrf与xss的区别在于：xss是盗取用户cookie值然后登录网页进行破坏，攻击者算是盗取到了用户的权限；csrf是借用用户的权限进行攻击，攻击者没有盗取到用户的权限。

<img src="/jpg/1.png" width="20%" height="20%"/>

防止csrf攻击：

可以设置token值；

还有就是在登录重要网站时不能随便点击别人发的链接；

在密码登录的时候加上验证码；

还有敏感信息修改时需要加上二次验证；



## REC

分为远程代码执行和远程系统命令执行

防止方法有执行严格的白名单



## 文件包含漏洞

本地文件包含

在url栏中写入本地含有的php可执行命令

未对传进来的变量做处理，直接包含了。

我们可以制定严格的白名单指定文件名



远程文件包含

在远程服务器上写入可执行php文件，比如一句话木马，然后将文件所在网址复制到要攻击的网站url栏可执行远程文件包含漏洞的地方



不能把文件包含函数对应的文件放在前端选择和操作

过滤../../这些与本地文件包含漏洞有关的命令

白名单仅包含指定运行的文件

配置网站php.ini文件，都关闭掉，像：allow_url_fopen=off   ；  allow_url_include=off 这些



## 不安全的文件下载

原理是没对前端传进来的文件进行判断，没判断是否在下载范围内，直接读取导致内部文件信息的泄露



对传入文件名进行过滤

对文件下载目录进行限定



## 文件上传

mime型验证：先上传一句话.php，点击上传，然后用bp抓包，再修改content-Type里的内容为image/jpg

最后放包，然后用蚁剑连接

前端限制：打开源代码控制台，删除相关限制函数，再进行上传

getimagesize型验证：在CMD命令中输入:copy /b 1.jpg + yijuhua.php 2.jpg

来生成2.jpg这个包含一句话木马的图片，然后上传，再利用本地文件包含漏洞进行利用

